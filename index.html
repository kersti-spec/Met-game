<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Met Gallery Game</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <header class="header">
        <a class="brand" href="index.html" aria-label="Back to home" style="background-color: white;">
            <img id="header-visual" class="header-visual" alt="The Met visual" />
        </a>

        <nav class="nav" aria-label="Main navigation">
            <a href="index.html" class="active">Home</a>
            <a href="game.html">Play Game</a>
        </nav>
    </header>

    <main class="container hero">
        <p class="kicker">The Met Collection API • Mini Game</p>

        <h1>Met Gallery Game</h1>
        <p class="subtitle">
            One artwork from each department.</p>
        <p class="subtitle">Guess if it was created before 1800 or in/after 1800.
        </p>

        <div class="hero-media" aria-hidden="true">
            <!-- Pane siia hiljem päris pilt. Kui praegu pole, jäta nii. -->
            <div class="hero-placeholder">
                <span>Artwork preview / animation placeholder</span>
            </div>
        </div>

        <a href="game.html" class="cta">Start game</a>

        <section class="info-card">
            <h2>How it works</h2>
            <ul>
                <li>We pick one artwork from each Met department (with an image).</li>
                <li>You guess: before 1800 vs 1800 or later.</li>
                <li>Your score increases for every correct answer.</li>
            </ul>
        </section>
    </main>

    <script>
        const headerImg = document.getElementById("header-visual");

        const animatedSrc =
            "https://cdn.sanity.io/images/cctd4ker/production/1357b570f8ec477e8bc69bf74f56b43877e72e58-720x466.gif?w=3840&q=75&fit=clip&auto=format";

        console.log("Animated src:", animatedSrc);

        const staticSrc = "images/met-logo.png";
        // play gif once, then switch to static image
        if (!sessionStorage.getItem("metHeaderPlayed")) {
            headerImg.src = animatedSrc;
            headerImg.onload = () => {
                setTimeout(() => {
                    headerImg.src = staticSrc;
                    sessionStorage.setItem("metHeaderPlayed", "true");
                }, 5000); // assuming gif is 4 seconds long
            };
        } else {
            headerImg.src = staticSrc;

            // remove item before leaving page 

            window.addEventListener("beforeunload", () => {
                sessionStorage.removeItem("metHeaderPlayed");
            });
        }
    </script>

</body>

</html>